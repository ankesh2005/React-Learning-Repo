<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ChatBot</title>
</head>
<body>
  
  <div class="js-container"></div>

  <script src="https://unpkg.com/supersimpledev/dayjs.js"></script>
  <script src="https://unpkg.com/supersimpledev/react.js"></script>
  <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>
  <script src="https://unpkg.com/supersimpledev/babel.js"></script>

  <script type="text/babel">
    function ChatInput(){
      const [inputText,setInputText]=React.useState('');

      function saveInputText(event){
        setInputText(event.target.value);
      }

      // state used to save data cthta chnages over time ir
      return (
        <>
          <input type="text" placeholder=" Send a message to ChatBot" size="30"
           onChange={saveInputText}
          />
          <button onClick={sendMessage}>Send</button>
        </>
      );
    }

    function sendMessage(){
      setChatMessages([
          ...chatMessages,
          {
            message:'test',
            sender:'user',
            id:crypto.randomUUID()
          }
        ]);
    }


    function ChatMessage(props){
      const {message, sender} = props;

      return (
        <div>
          {sender === "robot" && <img src="robot.png" width="50" />}
          {message}
          {sender === "user" && <img src="user.png" width="50" />}
        </div>
      );
    }

    function ChatMessages(){

      // state:- data that is conected to html

   
      //array destructuring
      //const [chatMessages,setChatMessages]=array;
      
      // const chatMessages=array[0];
      // const setChatMessages=array[1];

      // ... takes values in array and copy into a array
      // function sendMessage(){
      //   setChatMessages([
      //     ...chatMessages,
      //     {
      //       message:'test',
      //       sender:'user',
      //       id:crypto.randomUUID()
      //     }
      //   ]);
      // }

      return(
        <>

          {chatMessages.map((chatMessage,index) => {
            return (
              <ChatMessage
                key={chatMessage.id}
                message={chatMessage.message}
                sender={chatMessage.sender}
              />
            );
          })}
        </>
      );
    }



    function App(){

      const [chatMessages,setChatMessages]=React.useState([
        { message: 'hello ChatBot', sender: 'user',id:'id1' },
        { message: 'Hello! How can I help you?', sender: 'robot', id:'id2' },
        { message: 'can you get me todays date?', sender: 'user',id:'id3' },
        { message: 'today is september 27', sender: 'robot',id:'id4' }
      ]);


      return (
        <>
          <ChatInput />
          <ChatMessages/>
        </>
      );
    }

    const container = document.querySelector('.js-container');
    ReactDOM.createRoot(container).render(App());
  </script>

</body>
</html>
